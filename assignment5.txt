// This class defines the behavior of a user in the chat.
class ChatUser extends Thread {
    private volatile boolean paused = false;
    private volatile boolean running = true;

    ChatUser(String name) {
        super(name);
    }

    public void run() {
        int i = 1;
        while (running && i <= 5) {
            if (pause == false) {
                System.out.println(getName() + " says: Message " + i);
                i++;
                try { 
                    Thread.sleep(500); 
                } catch (Exception e) {}
            }
        }
        System.out.println(getName() + " finished chatting.");
    }

    // Methods to control the thread's execution
    public void pauseChat() { 
        paused = true; 
    }

    public void resumeChat() { 
        paused = false; 
    }

    public void stopChat() { 
        running = false; 
    }
}

// This class contains the main method to run the chat simulation.
public class TwoUserChatDemo {

    public static void main(String[] args) throws Exception {
        ChatUser u1 = new ChatUser("Alice");
        ChatUser u2 = new ChatUser("Bob");

        // Set thread priorities
        u1.setPriority(Thread.MAX_PRIORITY); // Alice = high priority
        u2.setPriority(Thread.MIN_PRIORITY); // Bob = low priority

        // Start both threads
        u1.start();
        u2.start();

        // Check if a thread is alive
        System.out.println("Alice alive? - " + u1.isAlive());

        // Pause Bob for a while
        Thread.sleep(1000);
        u2.pauseChat();
        System.out.println("Bob paused...");

        Thread.sleep(1000);
        u2.resumeChat();
        System.out.println("Bob resumed...");

        // Stop Alice early
        Thread.sleep(1000);
        u1.stopChat();
        System.out.println("Alice stopped...");

        // Wait for both threads to finish their execution
        u1.join();
        u2.join();

        System.out.println("Alice alive after join? " + u1.isAlive());
        System.out.println("Chat ended.");
    }
}
